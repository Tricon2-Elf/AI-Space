-*- outline -*-

settings.hedに含まれるファイルのメモ。

** autoexec.cfg

*** カメラ座標系関係

camera_dist_def,500.0,,
camera_dist_min,200.0,,
camera_dist_max,1000.0,,

カメラとアバターの距離の範囲を決める。
maxを大きくすると「引き」のカメラ位置を設定できるが、
あまり大きくしすぎるとズームが調整しずらい。20000くらい?

camera_pitch_def,20.0,,
camera_pitch_min,-15.0,,
camera_pitch_max,45.0,,

カメラの向きのうち、仰角の範囲を決める。
maxを90にすると真上から、minを-90にすると真下から見えるようになる。

*** 設定しても効果がなさそうなもの

move_gravity,98.0665,,
重力加速度かなと思って1/10にしてみたが、
ゆっくり落下するというわけではなさそう。

move_jump_power,35.0,,
「喜ぶ」モーションの高さが変わると思ったが、特にそういうことはなさそう。


** adv_presetdata.csv

ドラマで使うプリセット値が定義されている。

*** ドラマのカメラ位置のプリセット値

[MAP10010100]
桜並木,桜並木,-6052.205566,140,-10479.75684,0,0.999975,0,0.007082,

パラメータ0,1 名称
パラメータ2 X座標
パラメータ3 Z座標
パラメータ4 Y座標
パラメータ5 roll カメラのローリング角度(前後を軸とする回転角) ほぼ0
パラメータ6 dist キャラクタとの距離 小さいほど近い
パラメータ7 pitch カメラのピッチ角度(左右を軸とする回転角) ほぼ0 小さいほど下
パラメータ8 yaw カメラのヨーイング(上下を軸とする回転角) ほぼ-1〜+1

X = マップ左右(大きいほど右)
Y = マップ上下(大きいほど上)
yaw = |dist| >= 0.708: yaw=負→0→正 に対して マップ=左→下→右
      |dist| <  0.708: yaw=負→0→正 に対して マップ=左→上→右
いずれもyaw=0付近で大きく角度が変化する

ドラマではキャラクタの足元が表示されない構図となっているが、
パラメータ2(Z座標)を20から30くらい小さくしてやると、
画面に表示されるようになってくる。もっとも、頭が見切れるようになってくるが…

パラメータ6(ピッチ角度)を小さくしてもいいかもしれない。
ただし、クラナドの坂の下のように、ピッチを小さくするとカメラそのものが
傾いてくる場合もあり、よくわからない。

** equipment.csv
アイテムの属性

** equipment_ex.csv
サイリウム(1220000x)やほうきなどの特殊効果を持つアイテム

** emotion.txt
エモーションとして選択できるアニメーション
ここに追加すると、aiちゅーんやドラマで選択できるエモーションが増えるが、
正常動作するかは別の話

*** ドルを座れるようにする

27,16011,16021,-1,16061,,座る,,6,6,,OTHER,

と書いてあるところを、

27,16011,16021,-1,16061,,座る,sit,6,6,,OTHER,

に変更する。
するとaiちゅーん編集画面でエモーションとして選べるようになる。

ただし、普通のエモーションと異なり、エモーション待ちができない。
(ループ回数が-1であるため?)
このため、座り完了を待つには時間待ちなどで代用してやる必要がある。

ドラマでも座らせられるが、原作系NPCは座りモーションがない場合もある。

*** ai sp@ce入植時の演出

ai sp@ce入植時に電車に座っていたはずだが、モーションとしては存在しないようだ。
座った体型のモデルがあって、最初からそれなのかも。

** mainmenu.csv

「マクロウィンドウ」なる文字列が見える。
既存のメニューを開いたときにマクロウィンドウが開くかと思ったが、
特にそれらしき動きはしない。

** map.csv

中心位置や座標のサイズはmap.csvに書いてある。
学園や秋葉原のマップの中心位置は、マップウィンドウの中心と大体同じ。
ステージマップについてはマップ上方向にステージがある。
電車内マップは、X軸の正の方向に電車が進行している。
外神田ビルマップは、建物奥がマップ下。
